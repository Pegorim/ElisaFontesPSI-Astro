---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import BlogGrid from '../components/BlogGrid.astro';
import Testimonials from '../components/Testimonials.astro';
import { getEntry } from 'astro:content';

const entry = await getEntry('pages', 'sobre');
if (!entry) throw new Error('Could not find about page content');

const { Content } = await entry.render();

// AboutPage schema
const aboutSchema = {
  "@context": "https://schema.org",
  "@type": "AboutPage",
  "name": "Sobre Mim | Elisa Fontes - Psicóloga",
  "description": entry.data.description,
  "url": "https://elisafontes.com.br/sobre",
  "mainEntity": {
    "@type": "Person",
    "name": "Elisa Fontes",
    "jobTitle": "Psicóloga Clínica",
    "description": "Psicóloga clínica com 38 anos de experiência cuidando de pessoas. Formada pela Universidade Estácio de Sá, RJ.",
    "knowsAbout": ["Psicanálise", "Ansiedade", "Depressão", "Autoestima", "Terapia Online"],
    "hasCredential": {
      "@type": "EducationalOccupationalCredential",
      "credentialCategory": "Professional License",
      "name": "CRP 05/62794"
    },
    "worksFor": {
      "@type": "Organization",
      "name": "Consultório Elisa Fontes",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Rua Rui Barbosa, 29 - Sala 213",
        "addressLocality": "Niterói",
        "addressRegion": "RJ",
        "addressCountry": "BR"
      }
    }
  }
};
---

<Layout title="Sobre Mim | Terapia com Elisa" schema={aboutSchema}>
  <Header />

  <main class="pt-20">
    <!-- Page Header -->
    <section class="bg-card-bg/50 py-16 md:py-24 relative overflow-hidden">
        <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
            <h1 class="font-heading text-4xl md:text-5xl lg:text-6xl font-bold text-text-main mb-6">
                {entry.data.title}
            </h1>
            <p class="text-xl text-text-main/70 max-w-2xl mx-auto">
                {entry.data.description}
            </p>
        </div>
        
        <!-- Decoration circles -->
        <div class="absolute top-0 left-0 w-64 h-64 bg-white/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-accent/5 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"></div>
    </section>

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
        <div class="flex flex-col lg:flex-row gap-16 items-start">
            
            <!-- Image Column -->
            <div class="w-full lg:w-1/4 lg:sticky lg:top-32">
                <div class="relative rounded-2xl overflow-hidden shadow-xl aspect-[3/4]">
                    <img 
                        src="/images/elisa-profile-about.jpg" 
                        alt="Elisa Fontes" 
                        class="w-full h-full object-cover"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-accent/50 to-transparent opacity-60"></div>
                </div>
                
                <!-- Credentials/Info Box -->
                <div class="mt-8 bg-white p-6 rounded-xl border border-stone-100 shadow-sm">
                    <h3 class="font-heading text-xl font-bold mb-4">Credenciais</h3>
                    <ul class="space-y-3 text-sm text-text-main/80">
                        <li class="flex items-start gap-3">
                            <span class="text-accent mt-1">✓</span>
                            Psicóloga pela Universidade Estácio de Sá
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-accent mt-1">✓</span>
                            Abordagem em Psicanálise
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-accent mt-1">✓</span>
                            38 anos cuidando de pessoas
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-accent mt-1">✓</span>
                            CRP 05/62794
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Content Column -->
            <div class="w-full lg:w-3/4">
                <div class="prose prose-lg prose-stone max-w-none
                    prose-headings:font-heading prose-headings:text-text-main prose-headings:font-bold
                    prose-h2:mt-12 prose-h2:mb-6 prose-h3:mt-10 prose-h3:mb-4
                    prose-p:text-text-main/80 prose-p:leading-relaxed prose-p:mb-6
                    prose-a:text-accent prose-a:no-underline hover:prose-a:underline
                    prose-blockquote:border-l-accent prose-blockquote:bg-stone-50 prose-blockquote:py-4 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:not-italic prose-blockquote:my-8
                    prose-li:marker:text-accent prose-ul:my-6 prose-li:my-2">
                    
                    <Content />
                    
                </div>
            </div>

        </div>
    </div>
    
    <!-- Testimonials Section -->
    <section class="border-t border-stone-200 pt-16">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mb-8">
        <h2 class="font-heading text-3xl md:text-4xl text-text-main text-center mb-4">
          O que dizem meus pacientes
        </h2>
        <p class="text-text-main/60 text-center">
          Depoimentos de quem já passou pela terapia comigo
        </p>
      </div>
      <Testimonials />
    </section>

    <!-- Blog Section on About Page -->
    <div class="border-t border-stone-200">
        <BlogGrid limit={3} />
    </div>

  </main>

  <Footer />
</Layout>
